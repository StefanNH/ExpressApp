function encodeMorse() 
{
  msg = document.getElementById("message2").value;
  var result = '';
  var toMorse = {
      'a': '.-',
      'b': '-...',
      'c': '-.-.',
      'd': '-..',
      'e': '.',
      'f': '..-.',
      'g': '--.',
      'h': '....',
      'i': '..',
      'j': '.---',
      'k': '-.-',
      'l': '.-..',
      'm': '--',
      'n': '-.',
      'o': '---',
      'p': '.--.',
      'q': '--.-',
      'r': '.-.',
      's':'...',
      't': '-',
      'u': '..-',
      'v': '...-',
      'w': '.--',
      'x': '-..-',
      'y': '-.--',
      'z': '--..',
      '0': '-----',
      '1': '.----',
      '2': '..---',
      '3': '...--',
      '4': '....-',
      '5': '.....',
      '6': '-....',
      '7': '--...',
      '8': '---..',
      '9': '----.',
      'à': '.--.-',
      'å': '.--.-',
      'ä': '.-.-',
      'è': '.-..-',
      'é': '..-..',
      'ö': '---.',
      'ü': '..--',
      'ß': '...--..',
      'ñ': '--.--',
      '.': '.-.-.-',
      ',': '--..--',
      ':': '---...',
      ';': '-.-.-.',
      '?': '..--..',
      '-': '-....-',
      '_': '..--.-',
      '(': '-.--.',
      ')': '-.--.-',
      '\'': '.----.',
      '=': '-...-',
      '+': '.-.-.',
      '@': '.--.-.',
      ' ': '/'
  };
    
    for (var i = 0; i < msg.length; i++) 
    {
      if (i !== 0)
      {
         result += ' ';
      }
      var tmp = toMorse[msg.charAt(i).toLowerCase()];
      if (typeof tmp === 'undefined') 
      {
        tmp = msg.charAt(i);
      }
      result += tmp;
    }
  
    document.getElementById("message2").value = result;
}


function decodeMorse() 
{
    msg = document.getElementById("message2").value;
    var result = '';
    var toAlphabet = { 
      '.-':      'a',
      '-...':    'b',
      '-.-.':    'c',
      '-..':     'd',
      '.':       'e',
      '..-.':    'f',
      '--.':     'g',
      '....':    'h',
      '..':      'i',
      '.---':    'j',
      '-.-':     'k',
      '.-..':    'l',
      '--':      'm',
      '-.':      'n',
      '---':     'o',
      '.--.':    'p',
      '--.-':    'q',
      '.-.':     'r',
      '...':     's',
      '-':       't',
      '..-':     'u',
      '...-':    'v',
      '.--':     'w',
      '-..-':    'x',
      '-.--':    'y',
      '--..':    'z',
      '-----':   '0',
      '.----':   '1',
      '..---':   '2',
      '...--':   '3',
      '....-':   '4',
      '.....':   '5',
      '-....':   '6',
      '--...':   '7',
      '---..':   '8',
      '----.':   '9',
      '.--.-':   'à',
      '.--.-':   'å',
      '.-.-':    'ä',
      '----':    'ch',
      '.-..-':   'è',
      '..-..':   'é',
      '---.':    'ö',
      '..--':    'ü',
      '...--..': 'ß',
      '--.--':   'ñ',
      '.-.-.-':  '.',
      '--..--':  ',',
      '---...':  ':',
      '-.-.-.':  ';',
      '..--..':  '?',
      '-....-':  '-',
      '..--.-':  '_',
      '-.--.':   '(',
      '-.--.-':  ')',
      '.----.':  '\'',
      '-...-':   '=',
      '.-.-.':   '+',
      '.--.-.':  '@',
      '/':       ' '
    };

    var words = msg.split('/');
    for (var i = 0; i < words.length; i++) 
    {
      if (i !== 0)
      {
         result += ' ';
      }
      if (words[i].length === 0) 
      {
        continue;
      }
      var chars = words[i].split(' ');
      for (var j = 0; j < chars.length; j++) 
      {
        var tmp = toAlphabet[chars[j]];
  
        // check if a morse code translation exists
        if (typeof tmp === 'undefined') 
        {
          tmp = chars[j];
        }
  
        result += tmp;
      }
    }
  
    document.getElementById("message2").value = result;
}